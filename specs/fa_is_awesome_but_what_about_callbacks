
use app, BrowserWindow, Menu from electron
use fs

unique window is BrowserWindow
	menu = null
	width = 1300
	height = 800
	icon = 'images/icon.png'
	webPreferences:
		nodeIntegration = true
	created = false
	zabu: Zabu
		x = 9

	create
		Menu.setApplicationMenu null
		maximize
		loadFile 'index.html'
		on CLOSE
			print 'This is closed!'
		on ACTIVATE
			print 'This is closed!'
		webContents.openDevTools


with app
	on 'ready' receive event
		window.create()

	on 'window-all-closed' receive event
		if process.platform != 'darwin'
			app.quit()

	on 'activate' do
		if !window.created
			window.create()


class Listener
	action: String
	callback: (event:Event) -> void

class Button is Widget
	listeners: [Listener]

	on action=String, x=321321 -> WaiterFor[MouseEvent]
		if no action
			print.warn "Bad argument"
			exit
		listeners.push:
			action = 
			callback

waiter zabu() = String